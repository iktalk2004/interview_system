# é¡¹ç›®é‡æ„æ€»ç»“

## ğŸ‰ å®Œæˆçš„æ”¹è¿›

### 1. âœ… ä¿®å¤ API å¯†é’¥å®‰å…¨é—®é¢˜
- åˆ›å»ºäº† `.env` å’Œ `.env.example` æ–‡ä»¶ç”¨äºç®¡ç†ç¯å¢ƒå˜é‡
- å°†ç¡¬ç¼–ç çš„ DeepSeek API å¯†é’¥ç§»åˆ°ç¯å¢ƒå˜é‡
- æ›´æ–°äº† `settings.py` ä»¥æ”¯æŒç¯å¢ƒå˜é‡åŠ è½½
- åˆ›å»ºäº† `requirements.txt` æ–‡ä»¶ç®¡ç†ä¾èµ–
- æ›´æ–°äº† `.gitignore` ç¡®ä¿ `.env` æ–‡ä»¶ä¸ä¼šè¢«æäº¤

**éœ€è¦åšçš„ï¼š**
```bash
# 1. å®‰è£… python-dotenv
pip install python-dotenv

# 2. åœ¨ backend/.env æ–‡ä»¶ä¸­é…ç½®ä½ çš„ DeepSeek API å¯†é’¥
DEEPSEEK_API_KEY=your_actual_api_key_here
```

### 2. âœ… å®ç°æ¨èå¼•æ“æ ¸å¿ƒåŠŸèƒ½

#### æ•°æ®æ¨¡å‹
- **UserSimilarity**: ç”¨æˆ·ç›¸ä¼¼åº¦æ¨¡å‹ï¼ˆåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼‰
- **QuestionSimilarity**: é¢˜ç›®ç›¸ä¼¼åº¦æ¨¡å‹ï¼ˆåŸºäºç‰©å“çš„ååŒè¿‡æ»¤ï¼‰
- **Recommendation**: æ¨èè®°å½•æ¨¡å‹
- **UserPreference**: ç”¨æˆ·åå¥½æ¨¡å‹

#### ç®—æ³•å®ç°
- **åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤**: æ ¹æ®ç›¸ä¼¼ç”¨æˆ·çš„ç­”é¢˜è®°å½•æ¨èé¢˜ç›®
- **åŸºäºç‰©å“çš„ååŒè¿‡æ»¤**: æ ¹æ®å·²ç­”é¢˜ç›®çš„ç›¸ä¼¼é¢˜ç›®æ¨è
- **æ··åˆæ¨è**: ç»“åˆä¸¤ç§æ¨èç®—æ³•çš„ä¼˜åŠ¿

#### API æ¥å£
- `/api/recommender/user-similarities/` - ç”¨æˆ·ç›¸ä¼¼åº¦ç®¡ç†
- `/api/recommender/question-similarities/` - é¢˜ç›®ç›¸ä¼¼åº¦ç®¡ç†
- `/api/recommender/recommendations/` - æ¨èé¢˜ç›®
- `/api/recommender/user-preferences/` - ç”¨æˆ·åå¥½ç®¡ç†
- `/api/recommender/system/` - ç³»ç»Ÿç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# ç”Ÿæˆæ¨è
GET /api/recommender/recommendations/generate_recommendations/?type=hybrid&n=10

# æ›´æ–°ç”¨æˆ·ç›¸ä¼¼åº¦
POST /api/recommender/user-similarities/update_similarities/

# æ›´æ–°ç”¨æˆ·åå¥½
POST /api/recommender/user-preferences/update_preferences/
```

### 3. âœ… å®ç°æ•°æ®åˆ†æåŠŸèƒ½

#### æ•°æ®æ¨¡å‹
- **UserStats**: ç”¨æˆ·ç»Ÿè®¡æ•°æ®
- **CategoryStats**: åˆ†ç±»ç»Ÿè®¡æ•°æ®
- **DailyStats**: æ¯æ—¥ç»Ÿè®¡æ•°æ®
- **PerformanceTrend**: æ€§èƒ½è¶‹åŠ¿æ•°æ®

#### API æ¥å£
- `/api/analytics/user-stats/` - ç”¨æˆ·ç»Ÿè®¡
- `/api/analytics/category-stats/` - åˆ†ç±»ç»Ÿè®¡
- `/api/analytics/daily-stats/` - æ¯æ—¥ç»Ÿè®¡
- `/api/analytics/performance-trends/` - æ€§èƒ½è¶‹åŠ¿
- `/api/analytics/dashboard/` - åˆ†æä»ªè¡¨æ¿

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# è·å–ç”¨æˆ·æ¦‚è§ˆ
GET /api/analytics/dashboard/overview/

# æ›´æ–°ç”¨æˆ·ç»Ÿè®¡
POST /api/analytics/user-stats/update_stats/

# è·å–æ’è¡Œæ¦œ
GET /api/analytics/dashboard/leaderboard/
```

### 4. âœ… æ¨¡å—èŒè´£è°ƒæ•´ - è¯„åˆ†åŠŸèƒ½ç‹¬ç«‹åŒ–

åˆ›å»ºäº†ç‹¬ç«‹çš„ `scoring` æ¨¡å—ï¼š
- **ScoringHistory**: è¯„åˆ†å†å²æ¨¡å‹
- **ScoringViewSet**: è¯„åˆ†è§†å›¾é›†
- æ”¯æŒä¸¤ç§è¯„åˆ†æ–¹æ³•ï¼šembedding å’Œ LLM

**API æ¥å£ï¼š**
- `/api/scoring/scoring/` - è¯„åˆ†ç®¡ç†

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# å¯¹äº¤äº’è¿›è¡Œè¯„åˆ†
POST /api/scoring/scoring/score_interaction/
{
  "interaction_id": 1,
  "method": "embedding"
}

# è·å–æœ€æ–°è¯„åˆ†è®°å½•
GET /api/scoring/scoring/get_latest_scores/?limit=10
```

## ğŸ“‹ éœ€è¦æ‰§è¡Œçš„æ•°æ®åº“è¿ç§»

```bash
cd backend

# åˆ›å»ºè¿ç§»æ–‡ä»¶
python manage.py makemigrations recommender
python manage.py makemigrations analytics
python manage.py makemigrations scoring

# æ‰§è¡Œè¿ç§»
python manage.py migrate
```

## ğŸ”§ é…ç½®è¯´æ˜

### 1. ç¯å¢ƒå˜é‡é…ç½®

ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼š

```env
# DeepSeek API é…ç½®
DEEPSEEK_API_KEY=your_actual_api_key_here
DEEPSEEK_API_URL=https://api.deepseek.com/chat/completions

# Django é…ç½®
SECRET_KEY=your_django_secret_key_here
DEBUG=True

# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ SQLiteï¼‰
# DATABASE_NAME=your_database_name
# DATABASE_USER=your_database_user
# DATABASE_PASSWORD=your_database_password
# DATABASE_HOST=localhost
# DATABASE_PORT=3306
```

### 2. ä¾èµ–å®‰è£…

```bash
cd backend
pip install -r requirements.txt
```

## ğŸš€ å¯åŠ¨é¡¹ç›®

```bash
# åç«¯
cd backend
python manage.py runserver

# å‰ç«¯
cd frontend
npm run dev
```

## ğŸ“Š é¡¹ç›®æ¶æ„ä¼˜åŒ–

### ä¼˜åŒ–å‰çš„æ¶æ„
```
backend/
â”œâ”€â”€ practice/        # æ··å…¥äº†è¯„åˆ†åŠŸèƒ½
â”œâ”€â”€ recommender/    # ç©ºçš„
â””â”€â”€ analytics/      # ç©ºçš„
```

### ä¼˜åŒ–åçš„æ¶æ„
```
backend/
â”œâ”€â”€ practice/        # åªè´Ÿè´£ç­”é¢˜äº¤äº’æµç¨‹
â”œâ”€â”€ recommender/    # æ¨èå¼•æ“ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ views.py
â”‚   â”œâ”€â”€ algorithms.py
â”‚   â””â”€â”€ serializers.py
â”œâ”€â”€ analytics/      # æ•°æ®åˆ†æ
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ serializers.py
â””â”€â”€ scoring/        # è¯„åˆ†ç³»ç»Ÿï¼ˆæ–°å¢ï¼‰
    â”œâ”€â”€ models.py
    â”œâ”€â”€ views.py
    â””â”€â”€ serializers.py
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### æ¨èå¼•æ“

1. **åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤**
   - è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰
   - æ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·ç­”å¾—å¥½çš„é¢˜ç›®
   - æ¨èç»™ç›®æ ‡ç”¨æˆ·

2. **åŸºäºç‰©å“çš„ååŒè¿‡æ»¤**
   - è®¡ç®—é¢˜ç›®ä¹‹é—´çš„ç›¸ä¼¼åº¦
   - æ ¹æ®ç”¨æˆ·å·²ç­”é¢˜ç›®æ¨èç›¸ä¼¼é¢˜ç›®

3. **æ··åˆæ¨è**
   - ç»“åˆä¸¤ç§æ¨èç®—æ³•
   - å¯è°ƒæ•´æƒé‡æ¯”ä¾‹

### æ•°æ®åˆ†æ

1. **ç”¨æˆ·ç»Ÿè®¡**
   - æ€»ç­”é¢˜æ•°ã€å¹³å‡åˆ†ã€æœ€é«˜/æœ€ä½åˆ†
   - æ€»ç”¨æ—¶ã€å¹³å‡æ¯é¢˜ç”¨æ—¶
   - æ”¶è—æ•°é‡

2. **åˆ†ç±»ç»Ÿè®¡**
   - æ¯ä¸ªåˆ†ç±»çš„é¢˜ç›®æ•°å’Œç­”é¢˜æ•°
   - å¹³å‡åˆ†ã€æœ€éš¾/æœ€ç®€å•çš„é¢˜ç›®

3. **æ¯æ—¥ç»Ÿè®¡**
   - æ¯æ—¥ç­”é¢˜æ•°ã€æµè§ˆæ•°
   - æ¯æ—¥å¹³å‡åˆ†ã€ç”¨æ—¶

4. **æ€§èƒ½è¶‹åŠ¿**
   - åˆ†æ•°è¶‹åŠ¿
   - å‡†ç¡®ç‡è¶‹åŠ¿
   - é€Ÿåº¦è¶‹åŠ¿

5. **ä»ªè¡¨æ¿**
   - ç”¨æˆ·æ¦‚è§ˆ
   - æ’è¡Œæ¦œï¼ˆæŒ‰åˆ†æ•°ã€æŒ‰ç­”é¢˜æ•°ï¼‰

### è¯„åˆ†ç³»ç»Ÿ

1. **åŸºäºåµŒå…¥çš„è¯„åˆ†**
   - ä½¿ç”¨ sentence-transformers è®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦
   - è€ƒè™‘é•¿åº¦æƒ©ç½š
   - ä½¿ç”¨ sigmoid å‡½æ•°è¿›è¡Œéçº¿æ€§æ˜ å°„

2. **åŸºäº LLM çš„è¯„åˆ†**
   - ä½¿ç”¨ DeepSeek API è¿›è¡Œæ™ºèƒ½è¯„åˆ†
   - æ›´å‡†ç¡®ä½†éœ€è¦ API è°ƒç”¨

3. **è¯„åˆ†å†å²**
   - è®°å½•æ¯æ¬¡è¯„åˆ†çš„è¯¦ç»†ä¿¡æ¯
   - æ”¯æŒå¤šç§è¯„åˆ†æ–¹æ³•å¯¹æ¯”

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **API å¯†é’¥å®‰å…¨**
   - ç«‹å³æ›´æ¢å·²æš´éœ²çš„ DeepSeek API å¯†é’¥
   - ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ° Git

2. **æ•°æ®åº“è¿ç§»**
   - æ‰§è¡Œè¿ç§»å‰å…ˆå¤‡ä»½æ•°æ®åº“
   - æŒ‰é¡ºåºæ‰§è¡Œè¿ç§»å‘½ä»¤

3. **æ€§èƒ½ä¼˜åŒ–**
   - æ¨èç®—æ³•ä½¿ç”¨äº†ç¼“å­˜æœºåˆ¶
   - åµŒå…¥æ¨¡å‹å…¨å±€åŠ è½½ä»¥èŠ‚çœèµ„æº
   - ç›¸ä¼¼åº¦çŸ©é˜µå¯ä»¥å®šæœŸæ›´æ–°è€Œéå®æ—¶è®¡ç®—

4. **æµ‹è¯•å»ºè®®**
   - å…ˆç”¨å°‘é‡æ•°æ®æµ‹è¯•æ¨èç®—æ³•
   - éªŒè¯è¯„åˆ†ç»“æœçš„åˆç†æ€§
   - æ£€æŸ¥æ•°æ®åˆ†æçš„å‡†ç¡®æ€§

## ğŸ“ æ¯•ä¸šè®¾è®¡äº®ç‚¹

1. **å®Œæ•´çš„ååŒè¿‡æ»¤æ¨èç³»ç»Ÿ**
   - åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤
   - åŸºäºç‰©å“çš„ååŒè¿‡æ»¤
   - æ··åˆæ¨èç®—æ³•

2. **æ™ºèƒ½è¯„åˆ†ç³»ç»Ÿ**
   - åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„è‡ªåŠ¨è¯„åˆ†
   - åŸºäº LLM çš„æ™ºèƒ½è¯„åˆ†
   - è¯„åˆ†å†å²è¿½è¸ª

3. **å…¨é¢çš„æ•°æ®åˆ†æ**
   - ç”¨æˆ·ç»Ÿè®¡
   - åˆ†ç±»ç»Ÿè®¡
   - æ¯æ—¥ç»Ÿè®¡
   - æ€§èƒ½è¶‹åŠ¿
   - æ’è¡Œæ¦œ

4. **è‰¯å¥½çš„ä»£ç æ¶æ„**
   - æ¨¡å—èŒè´£æ¸…æ™°
   - ä»£ç å¤ç”¨æ€§å¥½
   - æ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ“ åç»­å»ºè®®

1. **å‰ç«¯é›†æˆ**
   - åˆ›å»ºæ¨èé¢˜ç›®å±•ç¤ºé¡µé¢
   - åˆ›å»ºæ•°æ®åˆ†æä»ªè¡¨æ¿
   - åˆ›å»ºè¯„åˆ†å†å²æŸ¥çœ‹é¡µé¢

2. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨ Celery å¼‚æ­¥å¤„ç†æ¨èè®¡ç®—
   - ä½¿ç”¨ Redis ç¼“å­˜çƒ­é—¨æ¨è
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

3. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ åŸºäºå†…å®¹çš„æ¨è
   - æ·»åŠ å®æ—¶æ¨è
   - æ·»åŠ  A/B æµ‹è¯•åŠŸèƒ½

4. **æ–‡æ¡£å®Œå–„**
   - ç¼–å†™ API æ–‡æ¡£
   - ç¼–å†™ç”¨æˆ·æ‰‹å†Œ
   - ç¼–å†™éƒ¨ç½²æ–‡æ¡£
